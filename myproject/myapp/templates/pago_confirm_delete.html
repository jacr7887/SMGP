{% extends "home.html" %}
{% load static humanize %} {# AsegÃºrate que humanize estÃ¡ cargado #}

{% block content %}
<div class="dark-container" role="main" aria-labelledby="main-heading"> {# Clase consistente #}
  <section>
    <h1 id="main-heading">ğŸ—‘ï¸ Confirmar EliminaciÃ³n de Pago #{{ object.id }}</h1> {# TÃ­tulo claro #}

    {# Botones de navegaciÃ³n consistentes #}
    <div class="header-actions">
        <a href="{% url 'myapp:pago_detail' object.pk %}" class="nav_link" aria-label="Cancelar y volver al detalle del pago">
            â¬…ï¸ Cancelar y Volver al Detalle
        </a>
         <a href="{% url 'myapp:pago_list' %}" class="nav_link" aria-label="Volver al listado de pagos">
            â¬…ï¸ Volver al Listado
        </a>
    </div>

    {# Contenedor principal para la confirmaciÃ³n #}
    <div class="delete-confirmation mt-3" data-section="confirmacion-eliminacion"> {# Margen superior aÃ±adido #}
        <h2 class="dark-label">âš ï¸ ConfirmaciÃ³n de EliminaciÃ³n</h2> {# TÃ­tulo de secciÃ³n #}
        <p>EstÃ¡s a punto de eliminar permanentemente el siguiente registro de pago. Verifica los datos:</p>

        {# Resumen detallado usando la estructura deseada #}
        <div class="detail-summary">

            <div class="detail-section">
                <h3 class="section-title visually-hidden">Datos Principales del Pago</h3>
                <div class="dark-group"><span class="dark-label">#ï¸âƒ£ ID Pago:</span> <span class="data-value">{{ object.pk }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ’° Monto:</span> <span class="data-value">${{ object.monto_pago|floatformat:2|intcomma }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ’³ MÃ©todo de Pago:</span> <span class="data-value">{{ object.get_forma_pago_display|escape }}</span></div>
                <div class="dark-group"><span class="dark-label">#ï¸âƒ£ Referencia:</span> <span class="data-value">{{ object.referencia_pago|default:"N/A"|escape }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ“… Fecha Pago:</span> <span class="data-value">{{ object.fecha_pago|date:"d/m/Y" }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ”” Fecha NotificaciÃ³n:</span> <span class="data-value">{{ object.fecha_notificacion_pago|date:"d/m/Y"|default:"N/A" }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ’¡ Estado Registro:</span> <span class="badge {% if object.activo %}badge-success{% else %}badge-danger{% endif %}">{{ object.activo|yesno:"Activo,Inactivo" }}</span></div>
            </div>

            <div class="detail-section">
                <h3 class="section-title visually-hidden">Asociaciones</h3>
                <div class="dark-group"><span class="dark-label">ğŸ§¾ Factura Vinculada:</span> <span class="data-value">{{ object.factura.numero_recibo|escape|default:"N/A" }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ“¢ ReclamaciÃ³n Vinculada:</span> <span class="data-value">{% if object.reclamacion %}#{{ object.reclamacion.pk }}{% else %}N/A{% endif %}</span></div>
            </div>

            <div class="detail-section">
                <h3 class="section-title visually-hidden">Observaciones y Documentos</h3>
                <div class="dark-group" style="grid-column: span 2;"><span class="dark-label">ğŸ’¬ Observaciones:</span> <span class="data-value">{{ object.observaciones_pago|escape|truncatechars:100|default:"-" }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ“ Documentos Adjuntos:</span><span class="data-value">{% if object.documentos_soporte_pago %}{{ object.documentos_soporte_pago.name|truncatechars:30 }}{% else %}Sin documentos{% endif %}</span></div>
            </div>

            <div class="detail-section">
                <h3 class="section-title visually-hidden">AuditorÃ­a</h3>
                {# Campos ModeloBase relevantes (sin nombres/apellidos) #}
                <div class="dark-group"><span class="dark-label">â• Fecha CreaciÃ³n:</span> <span class="data-value">{{ object.fecha_creacion|date:"d/m/Y H:i" }}</span></div>
                <div class="dark-group"><span class="dark-label">ğŸ”„ Fecha ModificaciÃ³n:</span> <span class="data-value">{{ object.fecha_modificacion|date:"d/m/Y H:i" }}</span></div>
            </div>

        </div> {# --- Fin detail-summary --- #}

        {# Mensaje de advertencia claro #}
        <div class="alert-warning mt-4" role="alert">
            <p><strong>Â¡AtenciÃ³n!</strong> Esta acciÃ³n no se puede deshacer.</p>
            <p>Eliminar este pago puede afectar el saldo pendiente de la factura o el estado de la reclamaciÃ³n asociada.</p>
            <p>Â¿EstÃ¡s completamente seguro de que deseas continuar?</p>
        </div>

        {# Formulario de confirmaciÃ³n #}
        <form method="post" class="delete-form" aria-label="Formulario de confirmaciÃ³n de eliminaciÃ³n">
            {% csrf_token %}
            <div class="form-actions"> {# Clase estÃ¡ndar para acciones #}
                <button type="submit" class="btn-warning" aria-label="Confirmar eliminaciÃ³n irreversible">
                    ğŸ—‘ï¸ Eliminar Definitivamente
                </button>
                <a href="{% url 'myapp:pago_detail' object.pk %}" class="btn-success" aria-label="Cancelar y volver al detalle del pago"> {# Clase estÃ¡ndar para cancelar #}
                    ğŸš« No, cancelar
                </a>
            </div>
        </form>
    </div> {# --- Fin delete-confirmation --- #}
  </section>
</div>

{% endblock content %}