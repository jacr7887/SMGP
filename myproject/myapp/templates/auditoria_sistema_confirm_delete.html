{% extends "home.html" %}
{% load static humanize %}

{% block content %}
<div class="dark-container" role="main" aria-labelledby="main-heading"> {# Clase ajustada #}
  <section>
    <h1 id="main-heading">ğŸ—‘ï¸ Confirmar EliminaciÃ³n de Registro de AuditorÃ­a #{{ object.id }}</h1> {# TÃ­tulo ajustado #}

    <div class="header-actions">
        <a href="{% url 'myapp:auditoria_sistema_detail' object.pk %}" class="nav_link" aria-label="Cancelar y volver al detalle del registro">
            â¬…ï¸ Cancelar y Volver al Detalle
        </a>
         <a href="{% url 'myapp:auditoria_sistema_list' %}" class="nav_link" aria-label="Volver al listado de auditorÃ­a">
            â¬…ï¸ Volver al Listado
        </a>
    </div>

    <div class="delete-confirmation mt-3" data-section="confirmacion-eliminacion"> {# Margen aÃ±adido #}
        <h2 class="dark-label">âš ï¸ ConfirmaciÃ³n de EliminaciÃ³n</h2> {# Usar clase dark-label #}
        <p>EstÃ¡s a punto de eliminar permanentemente el siguiente registro de auditorÃ­a. Verifica los datos:</p>

        <div class="detail-summary"> {# Contenedor para el resumen #}
            <div class="detail-section">
                <h3 class="section-title visually-hidden">Datos Principales</h3>
                 <div class="dark-group"><span class="dark-label">#ï¸âƒ£ ID Registro:</span><span class="data-value">{{ object.pk }}</span></div>
                 <div class="dark-group"><span class="dark-label">ğŸ”„ Tipo AcciÃ³n:</span><span class="data-value">{{ object.get_tipo_accion_display|default:object.tipo_accion }}</span></div>
                 <div class="dark-group"><span class="dark-label">âœ… Resultado:</span><span class="badge {% if object.resultado_accion == 'EXITO' %}badge-success{% elif object.resultado_accion == 'ERROR' %}badge-danger{% else %}badge-secondary{% endif %}">{{ object.get_resultado_accion_display|default:object.resultado_accion }}</span></div>
                 <div class="dark-group"><span class="dark-label">ğŸ‘¤ Usuario:</span><span class="data-value">{{ object.usuario.get_full_name|default:object.usuario.username|default:"Sistema" }}</span></div>
                 <div class="dark-group"><span class="dark-label">ğŸ“¦ Tabla Afectada:</span><span class="data-value">{{ object.tabla_afectada|default:"N/A" }}</span></div>
                 <div class="dark-group"><span class="dark-label">ğŸ”¢ ID Reg. Afectado:</span><span class="data-value">{{ object.registro_id_afectado|default:"N/A" }}</span></div>
            </div>
             <div class="detail-section">
                 <h3 class="section-title visually-hidden">Detalle y Contexto</h3>
                 <div class="dark-group" style="grid-column: span 2;"><span class="dark-label">ğŸ“ Detalle:</span><span class="data-value">{{ object.detalle_accion|escape|truncatechars:100|default:"-" }}</span></div>
                 <div class="dark-group"><span class="dark-label">ğŸŒ IP:</span><span class="data-value">{{ object.direccion_ip|default:"-" }}</span></div>
                 <div class="dark-group" style="grid-column: span 2;"><span class="dark-label">ğŸ“± Agente:</span><span class="data-value">{{ object.agente_usuario|escape|truncatechars:50|default:"-" }}</span></div>
            </div>
             <div class="detail-section">
                 <h3 class="section-title visually-hidden">Tiempos</h3>
                 <div class="dark-group"><span class="dark-label">â° Inicio:</span><span class="data-value">{{ object.tiempo_inicio|date:"d/m/Y H:i:s.u" }}</span></div>
                 <div class="dark-group"><span class="dark-label">â³ Fin:</span><span class="data-value">{{ object.tiempo_final|date:"d/m/Y H:i:s.u"|default:"N/A" }}</span></div>
                 <div class="dark-group"><span class="dark-label">â±ï¸ Control:</span><span class="data-value">{{ object.control_fecha_actual|date:"d/m/Y H:i:s.u" }}</span></div>
            </div>
             {# --- CAMPOS HEREDADOS ELIMINADOS --- #}
             {# No se muestran primer_nombre, activo, fecha_creacion, etc. #}
        </div>

        <div class="alert-warning mt-4" role="alert">
            <p><strong>Â¡AtenciÃ³n!</strong> Esta acciÃ³n no se puede deshacer.</p>
            <p>La eliminaciÃ³n de registros de auditorÃ­a debe hacerse con precauciÃ³n y de acuerdo a las polÃ­ticas de retenciÃ³n.</p>
            <p>Â¿EstÃ¡s completamente seguro de que deseas continuar?</p>
        </div>

        <form method="post" class="delete-form" aria-label="Formulario de confirmaciÃ³n de eliminaciÃ³n">
            {% csrf_token %}
            <div class="form-actions">
                <button type="submit" class="btn-danger">
                    ğŸ—‘ï¸ Eliminar Definitivamente
                </button>
                <a href="{% url 'myapp:auditoria_sistema_detail' object.pk %}" class="btn-success">
                    ğŸš« No, cancelar
                </a>
            </div>
        </form>
    </div>
  </section>
</div>

{% endblock %}