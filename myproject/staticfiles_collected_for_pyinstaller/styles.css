/* styles.css (v14.2 FIXED - CORRECCIONES PUNTUALES APLICADAS) */
*, *::before, *::after {
    box-sizing: border-box;
}

:root {
    --bg-dark: #0f1224;
    --glass-white: rgba(255, 255, 255, 0.1);
    --border-light: rgba(255, 255, 255, 0.15);
    --text-light: #ffffff;
    --text-muted: rgba(255, 255, 255, 0.7);
    --primary: rgba(92, 119, 255, 0.9);
    --secondary: rgba(23, 162, 184, 0.9);
    --success: rgba(40, 167, 69, 0.9);
    --danger: rgba(220, 53, 69, 0.9);
    --warning: rgba(255, 193, 7, 0.9);
    --info: #3498DB;
    --link-blue: #87CEEB;
    --blur: blur(15px);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --glass-bg: rgba(16, 21, 36, 0.65);
    --glass-box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    --glass-border-radius: 30px;
    --glass-padding: 1rem;
    --primary-rgb: 92, 119, 255;
    --secondary-rgb: 23, 162, 184;
    --warning-rgb: 255, 193, 7;
    --info-rgb: 52, 152, 219;
    --danger-rgb: 220, 53, 69;
    --success-rgb: 40, 167, 69;
    --text-light-rgb: 255, 255, 255;
    --dark-rgb: 15, 18, 36;
    --topbar-height: 65px; /* Aumentar de 30px a 60px */

    /* Responsive variables */
    --sidebar-width: 250px;
    --sidebar-collapsed-width: 70px;
    --carousel-height: 700px; /* Mantenido de v14.2 FIXED */
}

/* === CORRECCIÓN BOX-SIZING GLOBAL === */
*, *::before, *::after { box-sizing: border-box; }

/* ================================= */
/* === Reset Básico (AÑADIDO) === */
/* ================================= */
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow-x: auto; /* CORRECCIÓN: Permitir scroll horizontal si es necesario */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
}

/* ================================= */
/* === Estilos base (Modificado) === */
/* ================================= */
body {
    background: var(--bg-dark);
    color: var(--text-light);
    font-family: "Segoe UI", system-ui, sans-serif;
    line-height: 1.6;
    font-size: 1.05rem;
    border-radius: 0;
}

a { color: var(--link-blue); text-decoration: none; transition: var(--transition); }
a:hover { color: var(--text-light); }
h1, h2, h3, h4 { margin-top: 0; }
h1#main-heading, .main-title { color: #e0e0e0; font-size: 1.8rem; margin-bottom: 1.5rem; text-align: center; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
p { margin-bottom: 1rem; line-height: 1.6; }
ul { margin: 0; padding-left: 20px; }
fieldset { border: none; margin: 0; padding: 0; }
legend { font-weight: bold; color: var(--text-muted); padding: 0; margin-bottom: 0.5rem; }
button { cursor: pointer; font-family: inherit; }
.container { max-width: 1400px; width: 100%; margin: 1rem auto; padding: 0.5rem; }
.dark-container { background: rgba(16, 21, 36, 0.65); padding: 1rem; border-radius: 33px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); max-width: 1500px; margin: 1rem auto; transition: all 0.3s ease; }
.page_content { padding: 0rem; text-align: left; }
.mb-3 { margin-bottom: 1rem !important; }
.mb-4 { margin-bottom: 1.5rem !important; }
.mt-4 { margin-top: 1.5rem !important; }
.visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

/* Estilos Glassmorphism reutilizables */
.glass-card, .tab-header, .tab-button, .search-input, .alert, .navbar, .navbar-menu a, .sidebar, .nav_link-sidebar, .submenu_link, .notification_toggle, .user_menu_toggle, .notification_dropdown, .user_menu_dropdown, .notification_item, .user_menu_item { 
    background: var(--glass-bg); 
    border: 1px solid var(--border-light); 
    backdrop-filter: var(--blur); 
    box-shadow: var(--glass-box-shadow); 
    transition: var(--transition); 
}

/* Radios específicos */
.glass-card, .alert, .sidebar, .nav_link-sidebar, .submenu_link, .search-input, .nav_link { border-radius: var(--glass-border-radius); }
.tab-header { border-radius: var(--glass-border-radius) var(--glass-border-radius) 0 0;}
.tab-button { border-radius: var(--glass-border-radius); }
.tab-content { border-radius: 0 0 var(--glass-border-radius) var(--glass-border-radius); }
.notification_dropdown, .user_menu_dropdown { border-radius: 15px; } /* Mantenido de v14.2 */
.notification_toggle, .user_menu_toggle {     padding: 0.8rem; font-size: 1.3rem; border-radius: 50%; }
.topbar, .footer { border-radius: 0 !important; }

.glass-card { padding: var(--glass-padding); margin-bottom: 1rem; }
.tab-header { display: flex; gap: 0.4rem; padding: 0.7rem; }
.tab-button { padding: 0.5rem 1rem; font-size: 0.9rem; background: none; border: 1px solid transparent; color: var(--text-muted); cursor: pointer; }
.tab-button.active { background: var(--primary); color: white; border-color: rgba(255, 255, 255, 0.2); box-shadow: 0 4px 10px rgba(92, 119, 255, 0.9); }
.tab-content { padding: 1rem; }
.action-text { margin-left: 5px; font-size: 0.9em; }

/* =================================================================== */
/* === LAYOUT (SIDEBAR + MAIN - Padding main_content CORREGIDO) === */
/* =================================================================== */
.layout { 
    display: flex; 
    min-height: 100vh;
}

/* Sidebar: Restaurando lógica de la primera versión que proporcionaste */
.sidebar {
    border-right: 1px solid var(--border-light); 
    width: var(--sidebar-width); 
    height: 100vh;
    position: fixed; 
    top: 0; 
    left: 0;
    z-index: 1000; /* Asegurar que esté por encima del overlay */
    padding: 1.2rem 0; 
    display: flex; 
    flex-direction: column;
    overflow: visible !important; /* Para el submenú de exportación */
    background: var(--glass-bg); 
    backdrop-filter: var(--blur);
    box-shadow: var(--glass-box-shadow); 
    transition: width var(--transition), transform 0.3s ease; /* width para colapso, transform para móvil */
    /* En desktop, el sidebar está visible por defecto (no transform) */
    /* En móvil, se oculta con translateX(-100%) en la media query correspondiente */
}

.sidebar_content {
    flex-grow: 1;
    overflow-y: auto;
    overflow-x: hidden; /* Se ajustará en la media query para landscape móvil */
    position: relative; 
    z-index: 1; /* Contenido interno */
    padding-top: 60px;
    margin-top: -60px;
}
.content_area_wrapper {
    display: flex;
    flex-direction: column; /* Topbar arriba, contenido scrolleable abajo */
    flex-grow: 1; /* Ocupa el espacio restante al lado del sidebar */
    margin-left: var(--sidebar-width); /* Espacio para el sidebar fijo */
    min-height: 100vh; /* Asegurar altura completa */
    position: relative; /* Para que el z-index del topbar funcione bien */
    transition: margin-left var(--transition); /* Para colapso del sidebar */
}

.layout.sidebar_collapsed .content_area_wrapper {
    margin-left: var(--sidebar-collapsed-width);
}

.main_content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    margin-left: var(--sidebar-width); /* Default para desktop con sidebar visible */
    min-height: 100vh;
    transition: margin-left var(--transition);
    box-sizing: border-box;
    padding: 1rem;
    padding-top: calc(var(--topbar-height) + 2rem); /* Espacio para topbar fijo */ /* <-- IMPORTANTE */
    padding-bottom: 80px; /* Espacio para el footer */
    overflow-x: auto; 
}


.layout.sidebar_collapsed .sidebar {
    width: var(--sidebar-collapsed-width);
}
.layout.sidebar_collapsed .main_content {
    margin-left: var(--sidebar-collapsed-width);
}

.layout.sidebar_collapsed .footer .footer-brand-logo { display: none; }
.layout.sidebar_collapsed .footer p { flex-grow: 1; text-align: center; margin-left: 0; margin-right: 0; }
.layout.sidebar_collapsed .sidebar-brand-logo { display: none; }
.sidebar_header { padding: 0 0.6rem; margin-bottom: 1.2rem; display: flex; justify-content: space-between; align-items: center; color: var(--text-light); position: sticky; top: 0; background: var(--glass-bg); z-index: 2; padding-top: 1.2rem; }
.sidebar_header h2 { font-size: 1.2rem; margin: 0; }
.sidebar_toggle { background: none; border: none; color: var(--text-light); font-size: 1.2rem; cursor: pointer; padding: 0.2rem; }
.sidebar_toggle.mobile_only { display: none; /* Se activa en media query */ }

.layout.sidebar_collapsed .nav_text, 
.layout.sidebar_collapsed .nav_arrow, 
.layout.sidebar_collapsed .sidebar_header h2 { display: none; }
.layout.sidebar_collapsed .nav_link-sidebar { justify-content: center; }
.layout.sidebar_collapsed .submenu { display: none !important; }


/* Overlay para sidebar móvil */
.layout.sidebar_mobile_open .sidebar {
    transform: translateX(0); 
}
.layout.sidebar_mobile_open::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 999; /* Detrás del sidebar (1000) */
    backdrop-filter: var(--blur); /* Mantenido de v14.2 */
}


/* === SIDEBAR NAVEGACIÓN === (Tomado de v14.2) */
.nav_menu { list-style: none; padding: 0 0.6rem; margin: 0; }
.nav_item { margin-bottom: 0.5rem; position: relative; }
.nav_link-sidebar { 
    display: flex; 
    align-items: center; 
    gap: 0.8rem; 
    text-decoration: none; 
    color: var(--text-light); 
    padding: 0.5rem 1.2rem; 
    border-radius: var(--glass-border-radius); 
    border: 1px solid transparent; 
    margin-bottom: 0.2rem; 
    font-size: 1rem; 
    transition: var(--transition); 
}
.nav_link-sidebar:hover, 
.nav_item.active > .nav_link-sidebar { 
    background: rgba(255, 255, 255, 0.3) !important; 
    border-color: rgba(255, 255, 255, 0.6) !important; 
    box-shadow: 0 4px 20px rgba(255, 255, 255, 0.4), inset 0 0 12px rgba(255, 255, 255, 0.2) !important; 
    transform: translateY(-2px); 
}
.nav_icon { font-size: 1rem; }
.nav_arrow { margin-left: auto; font-size: 0.7rem; transition: transform 0.3s; }
.nav_item.open > .submenu_toggle .nav_arrow { transform: rotate(180deg); }
.submenu { list-style: none; padding: 0; margin: 0; display: none; }
.nav_item.open > .submenu { display: block; }
.submenu_link { 
    display: block; 
    text-decoration: none; 
    color: var(--text-light); 
    padding: 0.5rem 1.2rem; 
    border-radius: var(--glass-border-radius); 
    border: 1px solid transparent; 
    margin-bottom: 0.2rem; 
    font-size: 1rem; 
}
.submenu_link:hover, 
.submenu_link.active { 
    background: rgba(255, 255, 255, 0.2); 
    border-color: rgba(255, 255, 255, 0.3); 
    box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2); 
}

/* === POPUP EXPORT/IMPORT === (Tomado de v14.2) */
.export-menu { position: relative; }
.submenu.export-options {
    display: none; position: absolute; left: 100%; top: 0; margin-left: 8px; z-index: 1100;
    min-width: 240px; width: max-content; max-height: calc(100vh - 40px); overflow-y: auto;
    background: var(--glass-bg); border: 1px solid var(--border-light); border-radius: 15px;
    backdrop-filter: var(--blur); box-shadow: var(--glass-box-shadow); padding: 10px 0;
    opacity: 0; visibility: hidden; transform: translateX(10px);
    transition: opacity 0.2s ease-out, visibility 0s linear 0.2s, transform 0.2s ease-out;
}
.submenu.export-options.active {
    display: block; opacity: 1; visibility: visible; transform: translateX(0);
    transition: opacity 0.2s ease-out, visibility 0s linear 0s, transform 0.2s ease-out;
}
.submenu.export-options li { list-style: none; margin: 0; padding: 0; }
.submenu.export-options .submenu_link { display: block; padding: 10px 20px; margin: 2px 8px; color: var(--text-muted); text-decoration: none; white-space: nowrap; border-radius: 8px; background: transparent; transition: all 0.2s ease; font-size: 0.9rem; }
.submenu.export-options .submenu_link:hover { background: rgba(92, 119, 255, 0.2); color: var(--text-light); transform: translateX(4px); }
.submenu.export-options .submenu_header { display: block; padding: 12px 20px 6px 20px; margin: 8px 0 2px 0; font-weight: 600; color: var(--text-light); font-size: 0.8em; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid var(--border-light); opacity: 0.9; }
.submenu.export-options .submenu_header:first-of-type { margin-top: 0; }
.submenu.export-options::-webkit-scrollbar { width: 5px; }
.submenu.export-options::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 10px; }
.submenu.export-options::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.4); }

/* === TOPBAR === (MENÚ NOTIFICACIONES CENTRADO YA ESTABA BIEN, SE MANTIENE DE v14.2) */
.topbar {
    padding: 1.2rem 1.8rem !important; /* Aumento significativo */
    height: var(--topbar-height) !important; /* Usar nueva altura */
    background: rgba(15, 18, 36, 0.8); backdrop-filter: var(--blur);
    border-bottom: 0px solid var(--border-light);
    display: flex; justify-content: space-between; align-items: center;
    position: sticky; /* YA ESTÁ COMO STICKY */
    top: 0;           /* PEGAR AL TOPE */
    z-index: 950;     /* ASEGURAR QUE ESTÉ POR ENCIMA DE OTRO CONTENIDO (EXCEPTO SIDEBAR MÓVIL) */
    border-radius: 0 !important;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3); 
}
.topbar_left, 
.topbar_right {
    height: 100%; /* Usar altura completa */
    display: flex;
    align-items: center; /* Centrado vertical interno */
    gap: 1.2rem; /* Espaciado entre elementos */
}
.breadcrumbs { font-size: 0.8rem; color: var(--text-muted); }
.breadcrumb_item { margin-right: 0.3rem; color: var(--text-light); }
.breadcrumb_item:not(:last-child)::after { content: '>'; margin-left: 0.3rem; color: var(--text-muted); }
.notification_menu, .user_menu { position: relative; }
.notification_toggle, .user_menu_toggle {
    background: var(--glass-bg); border: 1px solid var(--border-light); 
    color: var(--text-muted); cursor: pointer; padding: 0.6rem; 
    font-size: 1.1rem; border-radius: 50%; display: flex; 
    align-items: center; justify-content: center; position: relative; 
    transition: var(--transition); backdrop-filter: var(--blur); 
    box-shadow: var(--glass-box-shadow); 
}
.notification_toggle:hover, .user_menu_toggle:hover { 
    background: rgba(255, 255, 255, 0.15); color: var(--text-light); 
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); transform: scale(1.05); 
}
.notification_icon { font-size: 1.2rem; }
.user_avatar { font-size: 1.2rem; }
.user_name { font-size: 0.9rem; margin-left: 0.3rem; }
.notification_badge { 
    background: var(--danger); color: white; padding: 2px 6px; 
    border-radius: 10px; font-size: 0.7rem; font-weight: bold; 
    position: absolute; top: -5px; right: -5px; line-height: 1; 
    border: 1px solid var(--bg-dark); 
}
.notification_dropdown, .user_menu_dropdown {
    position: absolute; 
    top: calc(100% + 12px) !important; /* Mayor distancia del topbar */
    right: 0; 
    display: none; 
    flex-direction: column;
    min-width: 320px; 
    max-width: 400px; 
    z-index: 1050; 
    background: var(--glass-bg);
    border: 1px solid var(--border-light); 
    backdrop-filter: var(--blur);
    box-shadow: var(--glass-box-shadow); 
    border-radius: 15px; 
    overflow: hidden;
    opacity: 0; 
    transform: translateY(-10px);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s linear 0.2s;
    visibility: hidden;
}

/* Ajustar alineación vertical del contenido del topbar */
.topbar_left, 
.topbar_right {
  height: 100%; /* Usar toda la altura disponible */
  align-items: center; /* Centrar contenido verticalmente */
}

.notification_menu.open .notification_dropdown, 
.user_menu.open .user_menu_dropdown { 
    display: flex; 
    opacity: 1; 
    transform: translateY(0); 
    visibility: visible;
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s linear 0s; 
}
.notification_header { 
    padding: 0.8rem 1.2rem; 
    background: rgba(0, 0, 0, 0.2); 
    font-size: 0.9rem; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-bottom: 1px solid var(--border-light); 
}
.notification_header h3 { margin: 0; font-size: 1.05rem; font-weight: 600; color: var(--text-light); }
.notification_header a.mark_all_read { color: var(--link-blue); font-size: 0.8rem; text-decoration: none; transition: var(--transition); }
.notification_header a.mark_all_read:hover { color: var(--text-light); text-decoration: underline; }
.notification_list { max-height: 350px; overflow-y: auto; scrollbar-width: thin; scrollbar-color: rgba(255, 255, 255, 0.2) var(--glass-bg); }
.notification_list::-webkit-scrollbar { width: 6px; }
.notification_list::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 10px; }
.notification_list::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 10px; }
.notification_list::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.4); }
.notification_item { 
    padding: 0.9rem 1.2rem; 
    display: flex; 
    align-items: flex-start; 
    gap: 1rem; 
    border-bottom: 1px solid var(--border-light); 
    transition: background-color 0.2s; 
    cursor: pointer; 
    position: relative; 
}
.notification_item:last-child { border-bottom: none; }
.notification_item:hover { background: rgba(255, 255, 255, 0.08); }
.notification_item.unread { background: rgba(var(--primary-rgb), 0.1); border-left: 3px solid var(--primary); padding-left: calc(1.2rem - 3px); }
.notification_item.unread .notification_text { font-weight: 500; color: var(--text-light); }
.notification_item.unread .notification_time { color: rgba(255, 255, 255, 0.8); }
.notification_item .notification_icon { font-size: 1.3rem; margin-top: 2px; flex-shrink: 0; }
.notification_item .notification_icon.info i { color: var(--info); }
.notification_item .notification_icon.success i { color: var(--success); }
.notification_item .notification_icon.warning i { color: var(--warning); }
.notification_item .notification_icon.error i { color: var(--danger); }
.notification_content { flex-grow: 1; overflow: hidden; }
.notification_text { margin: 0 0 0.3rem 0; font-size: 0.9rem; line-height: 1.4; color: var(--text-light); display: -webkit-box; -webkit-line-clamp: 5; line-clamp: 5; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; }
.notification_time { margin: 0; font-size: 0.75rem; color: var(--text-muted); }
.notification_empty { padding: 1.5rem 1rem; text-align: center; color: var(--text-muted); font-style: italic; font-size: 0.9rem; }
.notification_footer { padding: 0.6rem 1rem; background: rgba(0, 0, 0, 0.2); font-size: 0.85rem; display: flex; justify-content: center; align-items: center; border-top: 1px solid var(--border-light); }
.notification_footer a.view_all { color: var(--link-blue); font-size: 0.85rem; text-decoration: none; }
.notification_footer a.view_all:hover { color: var(--text-light); text-decoration: underline; }
.user_menu_item, .user_menu_item_button { padding: 0.7rem 1.2rem; text-decoration: none; color: var(--text-muted); display: flex; align-items: center; gap: 0.8rem; font-size: 0.95rem; transition: background-color 0.2s; }
.user_menu_item_button { background: none; border: none; width: 100%; text-align: left; cursor: pointer; font-family: inherit; }
.user_menu_item:hover, .user_menu_item_button:hover { background: rgba(255, 255, 255, 0.1); color: var(--text-light); }
.item_icon { font-size: 1rem; margin-right: 10px;}
.divider { height: 1px; background-color: var(--border-light); margin: 0.5rem 0; }

/* === CONTENIDO PÁGINA, TABLAS, FORMULARIOS, ETC. === */
/* (Se mantiene igual que el CSS de v14.2 FIXED) */
/* ... Toda esta sección se copia tal cual de tu archivo v14.2 FIXED ... */
/* === INICIO COPIA DE v14.2 === */
.page_content { padding: 0rem; flex-grow: 1}
.messages_container { margin-bottom: 1rem; }
.alert {
    display: flex; align-items: center; gap: 0.8rem;
    padding: 0.8rem 1.2rem; margin: 0.5rem 0; border-radius: 15px;
    font-size: 0.95rem; position: relative; background: var(--glass-bg);
    border: 1px solid var(--border-light); backdrop-filter: var(--blur);
    box-shadow: var(--glass-box-shadow); color: var(--text-light);
    transition: opacity 0.3s ease;
}
.alert i { font-size: 1.2rem; flex-shrink: 0; margin-right: 0.8rem; }
.alert > span, .alert > div:not([class*='icon']) { flex-grow: 1; text-align: center; line-height: 1.5; }
.alert > div { flex-grow: 1; text-align: left; line-height: 1.5; }
.alert-success { background-color: rgba(var(--success-rgb), 0.2); border-left: 5px solid var(--success); color: #c3e6cb; }
.alert-success i { color: var(--success); }
.alert-warning { background-color: rgba(var(--warning-rgb), 0.15); border-left: 5px solid var(--warning); color: #ffeca1; }
.alert-warning i { color: var(--warning); }
.alert-danger, .alert-error { background-color: rgba(var(--danger-rgb), 0.15); border-left: 5px solid var(--danger); color: #f5c6cb; }
.alert-danger i, .alert-error i { color: var(--danger); }
.alert-info { background-color: rgba(var(--info-rgb), 0.2); border-left: 5px solid var(--info); color: #bee5eb; }
.alert-info i { color: var(--info); }
.close_alert {
  position: absolute; top: 0.5rem; right: 0.8rem; background: none; border: none;
  color: inherit; font-size: 1.5rem; font-weight: bold; line-height: 1;
  cursor: pointer; opacity: 0.6; transition: opacity 0.2s; padding: 0;
}
.close_alert:hover { opacity: 1; }
.error-summary {
  background: rgba(var(--danger-rgb), 0.4); border: 1px solid var(--danger);
  border-radius: 15px; padding: 1rem 1.5rem; margin-bottom: 1.5rem;
  color: #ffced1; font-size: 0.95rem; backdrop-filter: var(--blur);
  box-shadow: var(--glass-box-shadow);
}
.error-summary h4 {
  margin-top: 0; margin-bottom: 0.8rem; color: #ffffff; font-weight: 600;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2); padding-bottom: 0.5rem;
  font-size: 1.1rem;
}
.error-summary ul { margin: 0; padding-left: 20px; }
.error-summary li { margin-bottom: 0.4rem; }
.error-messages {
  list-style: none; padding: 0; margin: 0.5rem 0 0 0;
  font-size: 0.85rem; color: #fc8181;
}
.error-messages li {
  background: rgba(var(--danger-rgb), 0.15); padding: 0.3rem 0.6rem;
  border-radius: 4px; margin-bottom: 0.3rem; display: inline-block;
  border: 1px solid rgba(var(--danger-rgb), 0.4);
}
.form-text.text-muted {
  font-size: 0.85rem; color: var(--text-muted);
  display: block; margin-top: 0.5rem;
}
.header-actions { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
.search-form { display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center; }
.search-input { flex: 1; padding: 0.5rem 0.5rem; color: var(--text-light); border-radius: var(--glass-border-radius); font-size: 1rem; height: 33px; }
.search-form .nav_link { padding: 0.5rem 1rem; font-size: 1rem; }
.table-container { width: 100%; overflow-x: auto; padding: 0; margin: 1rem 0; background: var(--glass-bg); border: 1px solid var(--border-light); border-radius: 15px; backdrop-filter: var(--blur); box-shadow: var(--glass-box-shadow); }
.data-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; line-height: 1.4; table-layout: auto; margin: 0; }
.data-table th, .data-table td { padding: 0.7rem 1rem; text-align: left; border: none; border-bottom: 1px solid var(--border-light); white-space: nowrap; }
.data-table th { font-weight: 600; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); background: rgba(0,0,0,0.1); text-align: center; position: sticky; top: 0; z-index: 1; }
.data-table td { color: var(--text-light); vertical-align: middle; }
.data-table tr:last-child td { border-bottom: none; }
.data-table tr:hover td { background: rgba(255, 255, 255, 0.05); }
.data-table td[role="cell"] a { color: var(--link-blue); }
.data-table td[role="cell"] a:hover { color: var(--text-light); }
.sort-header a { color: inherit !important; text-decoration: none !important; display: inline-flex; align-items: center; gap: 0.3rem; }
.sort-header a:hover { color: var(--text-light) !important; }
.sort-header span { font-size: 0.9em; opacity: 0.8; }
.actions { text-align: center !important; width: 1%; white-space: nowrap; }
.action-group { display: inline-flex; gap: 0.6rem; justify-content: center; }
.action-icon { color: var(--text-muted); font-size: 1.1rem; transition: color 0.2s, transform 0.2s; }
.action-icon:hover { color: var(--text-light); transform: scale(1.1); }
.action-icon.delete-link:hover { color: var(--danger); }
.no-results { text-align: center; padding: 2rem; font-style: italic; color: var(--text-muted); }

/* ===================================================================== */
/* === PALETA DE BADGES "CÁPSULA DE CRISTAL ARCOÍRIS" (Definitiva) === */
/* ===================================================================== */

/* --- Clase Base para todas las Cápsulas --- */
.badge {
    display: inline-block;
    padding: 0.5em 1em;
    font-size: 0.78em;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: 33px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 
        inset 0 1px 1px rgba(255, 255, 255, 0.25),
        0 3px 6px rgba(0, 0, 0, 0.4);
    transition: all 0.2s ease-in-out;
    cursor: default;
}

.badge:hover {
    transform: translateY(-1px) scale(1.02);
    box-shadow: 
        inset 0 1px 1px rgba(255, 255, 255, 0.3),
        0 4px 10px rgba(0, 0, 0, 0.5);
}

/* --- Paleta de Colores Extendida (Psicología del Color) --- */
.badge-success { background: linear-gradient(145deg, rgba(40, 190, 100, 0.7), rgba(25, 135, 84, 0.8)); color: #e8fff0; }
.badge-danger { background: linear-gradient(145deg, rgba(255, 80, 100, 0.7), rgba(220, 53, 69, 0.8)); color: #ffe8eb; }
.badge-warning { background: linear-gradient(145deg, rgba(255, 210, 50, 0.7), rgba(255, 193, 7, 0.8)); color: #4d3d00; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3); }
.badge-primary { background: linear-gradient(145deg, rgba(50, 150, 255, 0.7), rgba(13, 110, 253, 0.8)); color: #e0f0ff; }
.badge-info { background: linear-gradient(145deg, rgba(50, 220, 240, 0.7), rgba(13, 202, 240, 0.8)); color: #003c4d; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3); }
.badge-system { background: linear-gradient(145deg, rgba(150, 90, 255, 0.7), rgba(102, 16, 242, 0.8)); color: #f0e8ff; }
.badge-relationship { background: linear-gradient(145deg, rgba(230, 80, 160, 0.7), rgba(214, 51, 132, 0.8)); color: #ffe8f5; }
.badge-secondary { background: linear-gradient(145deg, rgba(150, 160, 170, 0.6), rgba(108, 117, 125, 0.7)); color: #e9ecef; }
.badge-dark { background: linear-gradient(145deg, rgba(60, 70, 80, 0.8), rgba(33, 37, 41, 0.9)); color: #f8f9fa; }
.badge-action { background: linear-gradient(145deg, rgba(253, 150, 50, 0.7), rgba(253, 126, 20, 0.8)); color: #fff2e8; }
.badge-special { background: linear-gradient(145deg, rgba(180, 220, 50, 0.7), rgba(163, 193, 7, 0.8)); color: #2a3300; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3); }
.badge-teal { background: linear-gradient(145deg, rgba(32, 201, 151, 0.7), rgba(25, 155, 116, 0.8)); color: #eafaf5; }
body {
    background-color: #333; /* Ejemplo: un fondo oscuro para apreciar el glassmorphism */
    color: #f0f0f0;
}
.compact-form { display: grid; gap: 1rem; padding: 1rem; }
.form-main-container { background: var(--glass-bg); border: 1px solid var(--border-light); border-radius: var(--glass-border-radius); padding: 2rem; margin: 1.5rem auto; max-width: 1600px; backdrop-filter: var(--blur); box-shadow: var(--glass-box-shadow); }
.form-main-container fieldset, .dark-container fieldset { 
    border: 0.1px solid rgba(255,255,255,0.1); 
    border-radius: 15px; padding: 1rem 1.5rem; 
    margin-bottom: 15px; background: rgba(16, 21, 36, 0.65);
    /* CORRECCIÓN DESBORDAMIENTO TABLAS ASOCIADAS EN DETAIL VIEW */
    overflow-x: auto; 
}
.form-main-container fieldset legend, .dark-container fieldset legend { font-weight: bold; color: #fff9f9da; font-size: 1.1rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); width: auto; display: inline-block; background: none; padding: 0 0.5rem; margin-left: 1rem; }
.compact-form .dark-grid { display: grid; gap: 1rem 1.5rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
.dark-group { background: rgba(16, 21, 36, 0.65); border-radius: 15px; padding: 1rem; border: 1px solid rgba(255,255,255,0.1); transition: transform 0.2s ease; width: 100%; display: flex; flex-direction: column; position: relative; gap: 0.5rem; margin-bottom: 0; }
.dark-group:hover { transform: translateY(-2px); }
.dark-label { display: block; color: #a0aec0; font-size: 0.95rem; margin-bottom: 0.2rem; font-weight: 500; }
.dark-group input:not([type="checkbox"]):not([type="radio"]), .dark-group select, .dark-group textarea, .dark-group .choices__inner { width: 99%; padding: 0.7rem 1.2rem; background: rgba(16, 21, 36, 0.8); border: 1px solid rgb(92, 119, 225); border-radius: 25px; color: #ffffff; font-size: 0.95rem; transition: all 0.3s; line-height: 1.5; }
.dark-group textarea { resize: vertical; min-height: 100px; max-height: 300px; padding: 1rem !important; }
.dark-group input:focus, .dark-group select:focus, .dark-group textarea:focus, .dark-group .choices__inner.is-focused { outline: none; border-color: rgb(92, 119, 225); box-shadow: 0 0 0 2px rgb(92, 119, 225); border-color: rgba(var(--primary-rgb), 0.9)!important;  box-shadow: 0 0 8px 3px rgba(var(--primary-rgb), 0.4) !important; }
.dark-group input::placeholder { color: #718096; opacity: 0.7; }
.dark-group.error { border-color: #fc8181; }
.dark-group.error input, .dark-group.error select, .dark-group.error textarea { border-color: #fc8181; }
.dark-group input:-webkit-autofill, .dark-group input:-webkit-autofill:hover, .dark-group input:-webkit-autofill:focus, .dark-group input:-webkit-autofill:active, .dark-group textarea:-webkit-autofill, .dark-group textarea:-webkit-autofill:hover, .dark-group textarea:-webkit-autofill:focus, .dark-group textarea:-webkit-autofill:active, .dark-group select:-webkit-autofill, .dark-group select:-webkit-autofill:hover, .dark-group select:-webkit-autofill:focus, .dark-group select:-webkit-autofill:active { -webkit-text-fill-color: var(--text-light) !important; box-shadow: 0 0 0 1000px var(--bg-dark) inset !important; transition: background-color 5000s ease-in-out 0s !important; caret-color: var(--text-light) !important; border: 1px solid rgb(92, 119, 225) !important; font-family: inherit !important; font-size: 0.95rem !important; -webkit-background-clip: text; }
.dark-group input:-moz-autofill, .dark-group input:autofill { filter: none !important; color: var(--text-light) !important; background-color: var(--bg-dark) !important; box-shadow: 0 0 0 1000px var(--bg-dark) inset !important; }
.dark-container .dark-grid { display: block !important; }
.dark-container .dark-group { margin-bottom: 0.8rem; border-bottom: 1px solid rgba(255, 255, 255, 0.08); padding-bottom: 0.8rem; background: rgba(16, 21, 36, 0.65); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 1rem; }
.dark-container .dark-group:last-child { border-bottom: none; margin-bottom: 0; }
.dark-container span:not(.dark-label):not(.badge), .dark-container p { color: var(--text-light); font-size: 1rem; margin: 0; line-height: 1.5; word-break: break-word; white-space: normal; padding: 0.1rem 0; }
.dark-container a { color: var(--link-blue); }
.dark-container a:hover { color: var(--text-light); }
.switch { position: relative; display: inline-block; width: 50px; height: 25px; vertical-align: middle;}
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.15); border: 1px solid var(--border-light); transition: var(--transition); border-radius: 34px; }
.slider:before { content: ""; position: absolute; height: 19px; width: 19px; left: 3px; bottom: 2px; background: #ccc; transition: var(--transition); border-radius: 50%; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
input:checked + .slider { background: var(--success); border-color: transparent; }
input:checked + .slider:before { transform: translateX(25px); background: #fff; }
.switch:hover .slider { box-shadow: 0 0 8px rgba(92, 119, 255, 0.3); }
.dark-group input.dark-date { padding: 0.7rem 1.2rem; background: rgba(16, 21, 36, 0.8); border: 1px solid rgb(92, 119, 225); border-radius: 25px; color: #ffffff; font-size: 0.95rem; transition: all 0.3s; line-height: 1.5; color-scheme: dark; }
.dark-group input.dark-date::-webkit-calendar-picker-indicator { filter: brightness(0) invert(1); cursor: pointer; opacity: 0.8; }
.dark-group input.dark-date::-webkit-calendar-picker-indicator:hover { opacity: 1; }
.dark-group input.dark-date:focus { outline: none; border-color: rgb(92, 119, 225); box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3); }
.dark-group input[type="date"], .dark-group input[type="datetime-local"] { padding: 0.7rem 1.2rem; background: rgba(16, 21, 36, 0.8); border: 1px solid rgb(92, 119, 225); border-radius: 25px; color: #ffffff; font-size: 0.95rem; transition: all 0.3s; line-height: 1.5; width: 99%; color-scheme: dark; font-family: inherit; appearance: none; -webkit-appearance: none; -moz-appearance: none; }
.dark-group input[type="date"]:focus, .dark-group input[type="datetime-local"]:focus { outline: none; border-color: rgb(92, 119, 225); box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3); }
.dark-group input[type="date"]::-webkit-calendar-picker-indicator, .dark-group input[type="datetime-local"]::-webkit-calendar-picker-indicator { filter: brightness(0) invert(1); cursor: pointer; opacity: 0.8; padding-left: 5px; }
.dark-group input[type="date"]::-webkit-calendar-picker-indicator:hover, .dark-group input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover { opacity: 1; }
.custom-file-input { position: relative; display: flex; align-items: center; gap: 1rem; }
.file-button { background: rgba(255, 255, 255, 0.1); color: #ffffff; border: none; padding: 0.8rem 1.2rem; border-radius: 25px; cursor: pointer; transition: transform 0.2s ease; }
.file-button:hover { transform: translateY(-1px); background: rgba(255, 255, 255, 0.15); }
.selected-file { color: #a0aec0; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
input[type="file"] { position: absolute; opacity: 0; width: 0.1px; height: 0.1px; overflow: hidden; }
.form-actions { display: flex; justify-content: center; gap: 1rem; width: 100%; margin-top: 1.5rem; }
.btn, [class^="btn-"], [class*=" btn-"] {
  padding: 0.7rem 1.5rem; margin: 0.2rem; border-radius: 25px;
  border: 1px solid transparent; font-weight: 600; display: inline-flex;
  align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer;
  font-size: 0.95rem; transition: var(--transition);
  background: var(--glass-bg); color: var(--text-light);
  backdrop-filter: var(--blur); box-shadow: var(--glass-box-shadow);
  white-space: nowrap; text-align: center;
}
.btn:hover, [class^="btn-"]:hover, [class*=" btn-"]:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
.btn:active, [class^="btn-"]:active, [class*=" btn-"]:active { transform: translateY(1px); box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
.btn-success { background-color: rgba(40, 167, 69, 0.7); border-color: rgba(40, 167, 69, 0.9); color: #fff; }
.btn-success:hover { background-color: rgba(40, 167, 69, 0.9); }
.btn-danger { background-color: rgba(220, 53, 69, 0.7); border-color: rgba(220, 53, 69, 0.9); color: #fff; }
.btn-danger:hover { background-color: rgba(220, 53, 69, 0.9); }
.btn-warning { background-color: rgba(255, 193, 7, 0.7); border-color: rgba(255, 193, 7, 0.9); color: #212529; }
.btn-warning:hover { background-color: rgba(255, 193, 7, 0.9); }
.btn-info { background-color: rgba(23, 162, 184, 0.7); border-color: rgba(23, 162, 184, 0.9); color: #fff; }
.btn-info:hover { background-color: rgba(23, 162, 184, 0.9); }
.nav_link { display: inline-flex; text-decoration: none; color: var(--text-light); padding: 0.5rem 1rem; border-radius: var(--glass-border-radius); border: 1px solid transparent; font-size: 1rem; width: auto; background: var(--glass-bg); backdrop-filter: var(--blur); box-shadow: var(--glass-box-shadow); transition: var(--transition); align-items: center; justify-content: center; }
.nav_link:hover { background: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.3); box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2); }
.django-pagination {
  list-style: none; display: flex; justify-content: center; align-items: center;
  padding: 0; margin-top: 2rem; gap: 0.8rem;
  width: -webkit-fit-content; width: -moz-fit-content; width: fit-content;
  max-width: 100%; margin-left: auto; margin-right: auto;
}
.django-pagination .btn-pagination { display: inline-flex; align-items: center; justify-content: center; text-decoration: none; font-weight: 500; font-size: 0.9rem; min-width: 40px; height: 40px; padding: 0 1rem; border-radius: 50%; background: var(--glass-bg); border: 1px solid var(--border-light); color: var(--text-muted); backdrop-filter: var(--blur); box-shadow: var(--glass-box-shadow); transition: var(--transition); cursor: pointer; text-align: center; white-space: nowrap; }
.django-pagination .pagination-current { display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem; min-width: 120px; height: 40px; padding: 0 1.5rem; border-radius: var(--glass-border-radius); background: rgba(255, 255, 255, 0.25); color: var(--text-light); border: 1px solid rgba(255, 255, 255, 0.5); cursor: default; box-shadow: 0 5px 25px rgba(255, 255, 255, 0.25), inset 0 0 10px rgba(255, 255, 255, 0.15); text-align: center; white-space: nowrap; }
.django-pagination .btn-pagination:hover { background: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.4); color: var(--text-light); box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2), inset 0 0 8px rgba(255, 255, 255, 0.1); transform: translateY(-2px); }
/* === FIN COPIA DE v14.2 === */


/* ================== GRAPHS CAROUSEL (MODIFICADO PARA CENTRADO Y RESPONSIVIDAD) ================== */
.graphs-carousel-container {
    position: relative;
    width: 100%;
    max-width: 1000px;
    margin: 1.5rem auto;
    padding: 1.2rem;
    padding-bottom: 50px; /* Espacio para los indicadores */
    background: var(--glass-bg);
    border: 1px solid var(--border-light);
    border-radius: 18px;
    backdrop-filter: var(--blur);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 1px rgba(255, 255, 255, 0.08),
                inset 0 -1px 1px rgba(0, 0, 0, 0.05);
    transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
}

.graphs-carousel-container:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25), inset 0 1px 2px rgba(255, 255, 255, 0.1), inset 0 -1px 2px rgba(0, 0, 0, 0.08);
}

.graphs-carousel-container .section-title {
    margin-top: 0;
    margin-bottom: 1rem;
    text-align: center;
    color: var(--text-light);
    font-weight: 600;
}

.graphs-carousel-container .search-container {
    margin-bottom: 0.8rem;
    display: flex;
    justify-content: center;
}

.graphs-carousel-container .search-form {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 0;
    width: 100%;
    max-width: 500px;
}

.graphs-carousel-container .search-input {
    flex-grow: 1;
    padding: 0.5rem 0.8rem;
    border-radius: var(--glass-border-radius);
    border: 1px solid var(--border-light);
    background-color: rgba(255,255,255,0.08);
    color: var(--text-light);
    font-size: 0.9rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
}

.graphs-carousel-container .search-input::placeholder {
    color: rgba(var(--text-light-rgb), 0.6);
}

.graphs-carousel-container .search-input:focus {
    border-color: rgba(var(--primary-rgb), 0.7);
    box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
    background-color: rgba(255,255,255,0.12);
    outline: none;
}

.graphs-carousel-container .search-form button.nav_link-sidebar {
    background: var(--glass-bg);
    border: 1px solid var(--border-light);
    color: var(--text-light);
    padding: 0.5rem 1rem;
    border-radius: var(--glass-border-radius);
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    white-space: nowrap;
    backdrop-filter: var(--blur);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease-out;
}

.graphs-carousel-container .search-form button.nav_link-sidebar:hover {
    background: rgba(var(--primary-rgb), 0.15);
    border-color: rgba(var(--primary-rgb), 0.3);
    color: #ffffff;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transform: translateY(-2px);
}

.graphs-carousel-container .search-form button.nav_link-sidebar:active {
    background: rgba(var(--primary-rgb), 0.1);
    transform: translateY(0px);
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}

.carousel-container {
    position: relative;
    width: 100%;
    margin-top: 0.5rem;
}

.carousel-wrapper {
    position: relative;
    width: 100%;
    overflow: hidden; /* Mantiene el efecto de deslizamiento contenido */
    border-radius: 12px; /* Unifica el radio con graph-card si es necesario */
}

.carousel-inner {
    display: flex;
    position: relative;
    width: 100%;
    min-height: var(--carousel-height);
    height: var(--carousel-height);
    transition: transform 0.5s ease-in-out;
}

.carousel-item {
    min-width: 100%;
    width: 100%;
    height: 100%; /* Asegura que el item ocupe toda la altura del inner */
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
    visibility: hidden;
    transition: opacity 0.6s ease-in-out;
    display: flex; /* Para centrar graph-card si fuera necesario, aunque graph-card ya es 100% */
    align-items: center;
    justify-content: center;
    padding: 10px; /* Espacio alrededor del graph-card, si se desea */
    box-sizing: border-box;
}

.carousel-item.active {
    opacity: 1;
    position: relative; /* Cambia de absolute a relative cuando está activo */
    z-index: 1;
    visibility: visible;
}

.graph-card {
    width: 100%;
    height: 100%; /* graph-card ocupa todo el espacio del carousel-item */
    display: flex;
    flex-direction: column;
    /* align-items: center; Ya no es necesario centrar .graph-content aquí si .graph-content se centra a sí mismo */
    background: rgba(var(--dark-rgb), 0.4);
    border: 1px solid rgba(var(--border-light), 0.7);
    border-radius: 10px;
    padding: 1rem;
    box-sizing: border-box;
    backdrop-filter: var(--blur);
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.18),
                inset 0 1px 1px rgba(255, 255, 255, 0.06),
                inset 0 -1px 1px rgba(0, 0, 0, 0.04);
    overflow: hidden; /* Previene que .graph-content o la gráfica se desborden del card */
}

.graph-title {
    text-align: center;
    margin-bottom: 0.8rem;
    color: var(--text-light);
    flex-shrink: 0; /* El título no debe crecer ni encogerse con el espacio flex */
    font-size: 1.1rem;
    font-weight: 500;
}

.graph-content {
    width: 100%;
    height: 100%; /* Toma el espacio restante después del título */
    flex-grow: 1; /* Asegura que ocupe el espacio vertical restante en .graph-card */
    display: flex;
    align-items: center;      /* MODIFICADO: Centra verticalmente el plotly-graph-div */
    justify-content: center;  /* MODIFICADO: Centra horizontalmente el plotly-graph-div */
    overflow: hidden;         /* MUY IMPORTANTE: Previene que Plotly se desborde de este contenedor */
    position: relative;       /* Para contexto de posicionamiento si es necesario */
    min-height: 0;            /* Ayuda a flexbox con contenido que puede desbordar verticalmente */
}

/* Contenedor directo de Plotly si se usa una clase específica en el HTML inyectado */
.graph-content .plot-container { /* Esta clase es opcional, si la tienes en tu HTML de gráfica */
   width: 100%;
   height: 100%;
   display: flex; 
   justify-content: center;
   align-items: center;
}

/* El div que Plotly.js crea o al que se adjunta */
.graph-content .plotly-graph-div {
    /* Estas propiedades permiten que Plotly determine su tamaño inicial
       pero lo restringen para que no exceda el .graph-content */
    max-width: 100%;
    max-height: 100%;

    /* Estas !important pueden ser necesarias si Plotly o Bootstrap ponen estilos inline conflictivos.
       width: auto y height: auto permiten que Plotly calcule su aspect ratio y tamaño inicial.
       Plotly.Plots.resize() luego ajustará esto basado en el espacio disponible en .graph-content.
    */
    width: auto !important;
    height: auto !important;

    /* Para asegurar que cualquier contenido dentro del plotly-graph-div (como el SVG)
       también se comporte bien si el div tiene un tamaño explícito. */
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0; /* Reset de márgenes */
    padding: 0; /* Reset de paddings */
}

/* Clases internas comunes de los SVG generados por Plotly */
.graph-content .plotly-graph-div > .svg-container,
.graph-content .plotly-graph-div > .main-svg {
    /* Fuerza al SVG a llenar el .plotly-graph-div */
    width: 100% !important;
    height: 100% !important;
    display: block !important; /* O display: flex si el SVG tiene hijos que necesitan flex */
}


.carousel-control {
    position: absolute !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 10 !important;
    background-color: rgba(var(--dark-rgb), 0.5) !important;
    color: white !important;
    border: 1px solid rgba(255,255,255,0.2) !important;
    border-radius: 50% !important;
    width: 38px !important;
    height: 38px !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: pointer;
    transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}
.carousel-control:hover {
    background-color: rgba(var(--primary-rgb), 0.25) !important;
    border-color: rgba(var(--primary-rgb), 0.4) !important;
    box-shadow: 0 2px 8px rgba(var(--primary-rgb), 0.2) !important;
    transform: translateY(-50%) scale(1.08);
    color: #fff !important;
}
.carousel-control.carousel-prev { left: 12px !important; }
.carousel-control.carousel-next { right: 12px !important; }

.carousel-indicators {
    position: absolute;
    bottom: 18px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: flex;
    gap: 3px;
    list-style: none;
    padding: 0;
    margin: 0;
}
.carousel-indicators button {
    width: 10px;
    height: 10px;
    background-color: rgba(var(--text-light-rgb), 0.25);
    border-radius: 50%;
    border: 1px solid rgba(var(--text-light-rgb), 0.3);
    cursor: pointer;
    padding: 0;
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.carousel-indicators button.active {
    background-color: var(--primary);
    border-color: rgba(var(--primary-rgb), 0.7);
    transform: scale(1.2);
    box-shadow: 0 0 7px var(--primary), 0 0 10px rgba(var(--primary-rgb), 0.35);
}
/* ================== FIN GRAPHS CAROUSEL (MODIFICADO) ================== */

/* ================== OTROS ================== */
/* (Se mantiene igual que el CSS de v14.2 FIXED) */
.loading{ position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(15,18,36,0.8); display:flex; justify-content:center; align-items:center; z-index:9999; }
.spinner{ width:50px; height:50px; border:5px solid rgba(255,255,255,0.3); border-radius:50%; border-top-color:#ffffff; animation:spin 1s ease-in-out infinite; }
@keyframes spin{ to{transform:rotate(360deg);} }
.user_menu_item_button { display: flex; align-items: center; background: none; border: none; color: inherit; cursor: pointer; font-family: inherit; font-size: inherit; line-height: inherit; padding: 8px 15px; text-align: left; width: 100%; }
.user_menu_item_button:hover { background-color: rgba(255, 255, 255, 0.1); }
.user_menu_item_button .item_icon { margin-right: 10px; }

/* === FOOTER === */
.footer {
    display: flex; 
    align-items: center; 
    box-sizing: border-box;
    background: var(--bg-dark); 
    border-top: 1px solid var(--border-light);
    box-shadow: none; 
    padding: 0.8rem 1rem; 
    text-align: center; 
    color: var(--text-muted);
    font-size: 0.85rem; 
    margin-top: auto; 
    border-radius: 0 !important;
    backdrop-filter: var(--blur);
    /* CORRECCIÓN FOOTER: No fijo para evitar solapamiento */
    /* position: fixed; */ 
    /* bottom: 0; */
    /* left: 0; */
    /* right: 0; */
    /* z-index: 900; */
}
.footer-brand-logo { height: 128px; width: auto; margin-right: auto; flex-shrink: 0; vertical-align: middle; }
.footer p { flex-grow: 1; text-align: center; margin: 0; }

/* Scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--glass-bg); border-radius: var(--glass-border-radius); }
::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.11); border-radius: var(--glass-border-radius); }
::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.363); }
::-webkit-scrollbar-thumb:active { background: rgba(255, 255, 255, 0.644); box-shadow: 0 0 9px rgba(255, 255, 255, 0.8); }

/* === SELECT2 STYLES === */
/* (Se mantiene igual que el CSS de v14.2 FIXED) */
.select2-container { width: 99% !important; font-family: inherit !important; font-size: 0.95rem !important; }
.select2-container--default .select2-selection--single { background-color: rgba(16, 21, 36, 0.8) !important; border: 1px solid rgb(92, 119, 225); border-radius: 25px !important; height: auto !important; min-height: calc(1.5em + 1.4rem + 2px); padding: 0.7rem 1.2rem !important; box-shadow: none !important; transition: all 0.3s !important; }
.select2-container--default .select2-selection--single .select2-selection__rendered { color: #ffffff !important; line-height: 1.5 !important; padding-left: 0 !important; padding-right: 20px !important; }
.select2-container--default .select2-selection--single .select2-selection__placeholder { color: #718096 !important; opacity: 0.7; }
.select2-container--default .select2-selection--single .select2-selection__arrow { height: calc(1.5em + 1.4rem) !important; position: absolute !important; top: 1px !important; right: 10px !important; width: 20px !important; }
.select2-container--default .select2-selection--single .select2-selection__arrow b { border-color: #ffffff transparent transparent transparent !important; border-width: 5px 4px 0 4px !important; margin-left: -4px !important; margin-top: -2px !important; }
.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b { border-color: transparent transparent #ffffff transparent !important; border-width: 0 4px 5px 4px !important; }
.select2-container--default .select2-selection--multiple { background-color: rgba(16, 21, 36, 0.8) !important; border: 1px solid rgb(92, 119, 225); border-radius: 25px !important; min-height: calc(1.5em + 1.4rem + 2px); padding: calc(0.7rem - 3px) calc(1.2rem - 3px) !important; cursor: text !important; transition: all 0.3s !important; box-shadow: none !important; }
.select2-container--default .select2-selection--multiple .select2-selection__choice { background-color: rgba(66, 153, 225, 0.3) !important; border: 1px solid rgb(92, 119, 225) !important; color: #ffffff !important; border-radius: 15px !important; padding: 3px 8px !important; margin-right: 5px !important; margin-top: 3px !important; }
.select2-container--default .select2-selection--multiple .select2-selection__choice__remove { color: #bee3f8 !important; margin-right: 5px !important; font-weight: bold !important; }
.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover { color: #ffffff !important; text-shadow: 0 0 5px #ffffff; }
.select2-container--default .select2-search--inline .select2-search__field { background: transparent !important; border: none !important; outline: 0 !important; box-shadow: none !important; color: #ffffff !important; margin-top: 6px !important; padding: 0 5px !important; min-width: 100px !important; }
.select2-container--default .select2-search--inline .select2-search__field::placeholder { color: #718096; opacity: 0.7; }
.select2-container--default .select2-selection--single:hover, .select2-container--default .select2-selection--multiple:hover { border-color: rgb(92, 119, 225) !important; }
.select2-container--default.select2-container--focus .select2-selection--single, .select2-container--default.select2-container--focus .select2-selection--multiple { border-color: rgb(92, 119, 225) !important; box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3) !important; }
.select2-dropdown { background-color: rgba(16, 21, 36, 0.95) !important; border: 1px solid rgb(92, 119, 225) !important; border-radius: 15px !important; margin-top: 5px !important; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 15px rgba(66, 153, 225, 0.2) !important; z-index: 1051 !important; }
.select2-search--dropdown .select2-search__field { background-color: rgba(27, 35, 61, 0.8) !important; border: 1px solid rgb(92, 119, 225) !important; border-radius: 20px !important; color: #ffffff !important; padding: 0.5rem 1rem !important; margin: 8px 8px 4px 8px !important; }
.select2-search--dropdown .select2-search__field:focus { outline: none; border-color: rgb(92, 119, 225) !important; box-shadow: 0 0 0 3px rgb(92, 119, 225) !important; }
.select2-results__option { padding: 0.6rem 1.2rem !important; color: #a0aec0 !important; transition: all 0.2s ease !important; }
.select2-results__option--highlighted[aria-selected] { background-color: rgba(66, 153, 225, 0.3) !important; color: #ffffff !important; }
.select2-results__option[aria-selected=true] { background-color: rgba(92, 119, 255, 0.1) !important; color: #bee3f8 !important; }
.select2-results__message { color: var(--text-muted) !important; padding: 0.6rem 1.2rem !important; }
select.select2-hidden-accessible {
    display: none !important;
}
.select2-container--default .select2-selection--multiple .select2-selection__rendered {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    padding-bottom: 0 !important; /* Evita espacio extra */
}

.select2-container--default .select2-selection--multiple .select2-search--inline {
    margin: 0 !important;
    padding: 0 !important;
}

.select2-container--default .select2-selection--multiple .select2-selection__placeholder {
    display: none !important; /* Oculta el placeholder redundante */
}

/* Aseguramos que el campo de búsqueda interno sí muestre el placeholder */
.select2-container--default .select2-search--inline .select2-search__field {
    margin-top: 5px !important; /* Ajuste vertical */
}

/* --- Contenedores y texto general --- */
.dataTables_wrapper .dt-layout-row {
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}
.dataTables_wrapper .dt-length label,
.dataTables_wrapper .dt-search label,
.dataTables_wrapper .dt-info {
    color: var(--text-muted);
    font-weight: 500;
}

/* --- Input de búsqueda y Selector de longitud --- */
.dataTables_wrapper .dt-input {
    background: var(--glass-bg) !important;
    border: 1px solid var(--border-light) !important;
    color: var(--text-light) !important;
    border-radius: var(--glass-border-radius) !important;
    box-shadow: var(--glass-box-shadow) !important;
    backdrop-filter: var(--blur) !important;
    -webkit-backdrop-filter: var(--blur) !important;
    padding: 0.5rem 1rem !important;
    transition: var(--transition) !important;
}

.dataTables_wrapper .dt-input:focus {
    border-color: var(--text-light) !important;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.5) !important;
    outline: none !important;
}

.dataTables_wrapper .dt-length select option {
    background: var(--bg-dark);
    color: var(--text-light);
}

/* --- Paginación --- */
.dataTables_wrapper .dt-paging .paginate_button {
    background: transparent !important;
    border: 1px solid var(--border-light) !important;
    color: var(--text-muted) !important;
    box-shadow: none !important;
    margin: 0 3px !important;
    border-radius: 50% !important;
    transition: var(--transition) !important;
    width: 38px;
    height: 38px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}

.dataTables_wrapper .dt-paging .paginate_button:hover {
    color: var(--text-light) !important;
    border-color: var(--text-light) !important;
    background: rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.5) !important;
    transform: translateY(-2px);
}

.dataTables_wrapper .dt-paging .paginate_button.current,
.dataTables_wrapper .dt-paging .paginate_button.current:hover {
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    color: white !important;
    box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.7) !important;
    transform: none;
}

.dataTables_wrapper .dt-paging .paginate_button.disabled,
.dataTables_wrapper .dt-paging .paginate_button.disabled:hover {
    opacity: 0.4 !important;
    background: transparent !important;
    border-color: var(--border-light) !important;
    box-shadow: none !important;
    transform: none !important;
}

/* --- Estilo de la Tabla --- */
table.dataTable {
    border-bottom: none !important; /* Evitar doble borde en la última fila */
}

@media (min-width: 768px) {
    .dataTables_length { float: left; }
    .dataTables_filter { float: right; }
    .dataTables_wrapper::after { content: ""; display: table; clear: both; }
    .dataTables_info { float: left; }
    .dataTables_paginate { float: right; text-align: right;}
}


/* ====================================================== */
/* ===              RESPONSIVE STYLES                 === */
/* ====================================================== */

/* --- Mobile First Approach: Sidebar oculto y toggle visible --- */
@media (max-width: 991px) {
    .sidebar {
        transform: translateX(-100%); /* Oculto por defecto */
        width: 280px; /* Ancho fijo para el sidebar móvil cuando está abierto */
    }

    /* El content_area_wrapper ocupa todo el ancho cuando el sidebar está oculto en móvil */
    .content_area_wrapper {
        margin-left: 0 !important; 
    }

    .sidebar_toggle.mobile_only {
        display: flex !important; /* Mostrar el botón de hamburguesa */
        position: fixed; left: 15px; top: 10px; z-index: 1050; /* Encima del topbar y overlay */
        background: var(--glass-bg); border: 1px solid var(--border-light);
        border-radius: 50%; width: 40px; height: 40px;
        align-items: center; justify-content: center;
    }

    .layout.sidebar_mobile_open .sidebar {
        transform: translateX(0); /* Mostrar sidebar */
    }

    /* En móvil, colapsado no aplica de la misma forma que en desktop para el margen */
    .layout.sidebar_collapsed .content_area_wrapper {
        margin-left: 0 !important; /* Asegurar que ocupe todo si está "colapsado" en móvil */
    }
    
    /* Asegurar que los textos del sidebar sean visibles cuando está abierto en móvil */
    .layout.sidebar_mobile_open .nav_text,
    .layout.sidebar_mobile_open .nav_arrow,
    .layout.sidebar_mobile_open .sidebar_header h2 {
        display: block; /* O inline-block según el diseño original */
    }
    .layout.sidebar_mobile_open .nav_link-sidebar {
        justify-content: flex-start;
    }

    /* Ajustar altura del carrusel para tablet/móvil */
    :root {
        --carousel-height: 500px; /* Incrementado desde 480px/450px */
    }
    .user_name { display: none; } /* Ocultar nombre de usuario en tablet/móvil */

    /* MENÚ NOTIFICACIONES CENTRADO MÓVIL (VERTICAL Y HORIZONTAL) */
    /* La variable --topbar-height se usa aquí, así que si cambia, esto se ajusta */
    .notification_dropdown,
    .user_menu_dropdown {
        position: fixed !important; 
        top: calc(var(--topbar-height) + 10px) !important; /* Ajustado para que no se solape con el topbar */
        left: 50% !important;
        transform: translateX(-50%) translateY(-10px) !important; 
        width: calc(100vw - 30px) !important; 
        max-width: 380px !important; 
        min-width: 280px !important; 
        max-height: calc(100vh - var(--topbar-height) - 30px) !important; 
        overflow-y: auto !important; 
    }
    .notification_menu.open .notification_dropdown,
    .user_menu.open .user_menu_dropdown {
        transform: translateX(-50%) translateY(0) !important; 
    }
}

/* RWD: Small Desktops (992px - 1199px) */
@media (min-width: 992px) and (max-width: 1199px) {
  :root { 
    --carousel-height: 500px; /* Incrementado desde 480px */
    --sidebar-width: 230px; /* Si quieres un sidebar más pequeño en este breakpoint */
    --sidebar-collapsed-width: 60px;
  }
  .container, .dark-container { 
    width: auto; 
    max-width: calc(100% - 2rem); 
    margin-left: 1rem; margin-right: 1rem;
  }
  .main_content_scroll_wrapper { /* Ajustado padding para este contenedor */
    padding: 0.8rem; 
  }
  h1#main-heading, .main-title { font-size: 1.6rem; margin-bottom: 1.2rem; }
  
  .sidebar { width: var(--sidebar-width); transform: translateX(0); }
  .content_area_wrapper { margin-left: var(--sidebar-width); }
  
  .layout.sidebar_collapsed .sidebar { width: var(--sidebar-collapsed-width); }
  .layout.sidebar_collapsed .content_area_wrapper { margin-left: var(--sidebar-collapsed-width); }
  
  .sidebar_toggle.mobile_only { display: none !important; }
  .form-main-container { padding: 1.5rem; }
  
  .dataTables_wrapper { display: flex; flex-direction: column; gap: 0.5rem; }
  .dataTables_length, .dataTables_filter, .dataTables_info, .dataTables_paginate { float: none !important; width: 100%; text-align: left; }
  .dataTables_filter { justify-content: flex-start; }
  .dataTables_paginate { text-align: center; }
}

/* RWD: Mobile (específicos para < 768px) */
@media (max-width: 767px) {
  :root { 
    --carousel-height: 500px; /* Altura carrusel para móvil, mantenida/incrementada */
    --topbar-height: 50px;  /* Si el topbar se hace más pequeño aquí */
  }
  body { font-size: 0.9rem; }
  .container, .dark-container { width: auto; max-width: 100%; margin: 0.5rem; padding: 0.5rem; border-radius: 20px; }
  
  .main_content_scroll_wrapper { /* Padding general del contenido */
    padding: 0.5rem; 
    /* El padding-bottom para el footer ya está manejado por el footer siendo un flex item */
  }
  .footer { /* Asegurar padding en el footer mismo */
    padding-bottom: 1rem; /* Espacio extra si es necesario */
  }

  h1#main-heading, .main-title { font-size: 1.3rem; margin-bottom: 1rem; }
  .sidebar { width: 280px; /* Ancho del sidebar móvil cuando está abierto */ }
  .topbar { 
    padding: 0.3rem 0.5rem; 
    height: var(--topbar-height); /* Usar la variable actualizada */
  }
  
  .header-actions { flex-direction: column; align-items: stretch; gap: 0.5rem; }
  .search-form { flex-direction: column; width: 100%; gap: 0.5rem; }
  .search-form .nav_link, .search-form .btn { width: 100%; justify-content: center; }
  .search-input { height: auto; padding: 0.6rem 0.8rem; }
  
  .form-main-container { padding: 1rem; margin: 1rem 0.5rem; border-radius: 20px; }
  .compact-form .dark-grid { grid-template-columns: 1fr; gap: 0.8rem; }
  .dark-group { padding: 0.8rem; border-radius: 15px; }
  .dark-group input:not([type="checkbox"]):not([type="radio"]), .dark-group select, .dark-group textarea, .dark-group .choices__inner { 
    width: 100%; font-size: 0.9rem; padding: 0.6rem 1rem; border-radius: 20px; 
  }
  .form-actions { flex-direction: column; align-items: stretch; gap: 0.5rem; }
  .form-actions .btn, .form-actions .nav_link { width: 100%; margin: 0.2rem 0; padding: 0.8rem; font-size: 0.95rem; }
  
  .data-table th, .data-table td { font-size: 0.8rem; padding: 0.5rem 0.6rem; white-space: normal; }
  .data-table th { font-size: 0.75rem; }
  .data-table td.actions { white-space: nowrap; }
  .action-group { gap: 0.4rem; }
  .action-icon { font-size: 1rem; }
  
  .django-pagination { gap: 0.3rem; flex-wrap: wrap; justify-content: center; margin-top: 1.5rem; }
  .django-pagination .btn-pagination { min-width: 32px; height: 32px; font-size: 0.75rem; padding: 0 0.6rem; }
  .django-pagination .pagination-current { min-width: 80px; height: 32px; font-size: 0.75rem; padding: 0 0.8rem; }
  
  .graphs-carousel-container { padding: 0.8rem; padding-bottom: 35px; margin: 1rem 0.5rem; border-radius: 15px; }
  .graphs-carousel-container .search-form { flex-direction: column; max-width: none; gap: 0.5rem; }
  .graphs-carousel-container .search-form button.nav_link-sidebar { width: 100%; justify-content: center; }
  .carousel-inner { min-height: var(--carousel-height); height: var(--carousel-height); }
  .graph-card { padding: 0.8rem; border-radius: 8px; }
  .graph-title { font-size: 1rem; margin-bottom: 0.5rem; }
  .carousel-control { width: 32px !important; height: 32px !important; }
  .carousel-control.carousel-prev { left: 5px !important; }
  .carousel-control.carousel-next { right: 5px !important; }
  .carousel-indicators { bottom: 8px; gap: 6px; }
  .carousel-indicators button { width: 9px; height: 9px; }
  
  .footer { padding: 0.6rem 0.8rem; font-size: 0.75rem; flex-direction: column; gap: 0.5rem; text-align: center; }
  .footer-brand-logo { height: 80px; margin-right: 0; margin-bottom: 0.5rem; }
  
  .dataTables_wrapper { flex-direction: column; gap: 0.8rem; }
  .dataTables_length, .dataTables_filter, .dataTables_info, .dataTables_paginate { float: none !important; width: 100%; text-align: left; }
  .dataTables_paginate { text-align: center; display: flex; flex-wrap: wrap; justify-content: center; gap: 0.3rem; }
  .dataTables_paginate .paginate_button { margin: 2px; padding: 0.5rem 0.8rem; }
  .data-table th { font-size: 0.75rem; padding: 0.5rem 0.4rem; letter-spacing: 0.2px; }
  .data-table td { font-size: 0.8rem; padding: 0.5rem 0.4rem; white-space: normal; }
  .data-table td.actions { white-space: nowrap; }
}

/* RWD: Small Mobile (hasta 575px) */
@media (max-width: 575px) {
  :root { 
    --carousel-height: 480px; /* Ajustar si 500px es mucho para los más pequeños */
    --topbar-height: 45px;   /* Topbar más pequeño */
  }
  body { font-size: 0.85rem; }
  .container, .dark-container, .form-main-container, .graphs-carousel-container { 
    margin-left: 0.3rem; margin-right: 0.3rem; padding: 0.4rem; border-radius: 15px; 
  }
  .graphs-carousel-container { padding-bottom: 35px; }
  .main_content_scroll_wrapper { /* Padding general del contenido */
    padding: 0.4rem; 
  } 
  .topbar { height: var(--topbar-height); }
  .sidebar_toggle.mobile_only { font-size: 1.3rem; padding: 0.4rem; top: calc((var(--topbar-height) - 34px) / 2); left: 7px; } /* Centrar toggle en topbar más pequeño */
  h1#main-heading, .main-title { font-size: 1.2rem; }
  .btn, [class^="btn-"], [class*=" btn-"], .nav_link { font-size: 0.85rem; padding: 0.6rem 1rem; }
  .form-actions .btn, .form-actions .nav_link { padding: 0.7rem; }
  .data-table th, .data-table td { font-size: 0.75rem; padding: 0.4rem 0.5rem; }
  .django-pagination .btn-pagination, .django-pagination .pagination-current { min-width: 28px; height: 28px; font-size: 0.7rem; padding: 0 0.5rem; }
  .django-pagination .pagination-current { min-width: 70px; }
  .carousel-inner { height: var(--carousel-height); min-height:var(--carousel-height); }
  .footer { padding: 0.5rem 0.6rem; font-size: 0.7rem; }
  .footer-brand-logo { height: 60px; }
  .data-table th { font-size: 0.7rem; padding: 0.4rem 0.3rem; letter-spacing: 0.1px; }
  .data-table td { font-size: 0.75rem; padding: 0.4rem 0.3rem; }
}

/* Landscape orientation for tablets and phones (revisado) */
@media screen and (orientation: landscape) and (max-width: 991px) {
    :root {
        --carousel-height: 450px; /* Reducido para landscape móvil */
    }
    .carousel-inner {
        min-height: var(--carousel-height);
        height: var(--carousel-height);
    }
    .graphs-carousel-container {
        padding-bottom: 40px;
    }
    .sidebar_content {
        overflow-x: auto !important; 
        -webkit-overflow-scrolling: touch; 
    }
    .nav_link-sidebar {
       min-width: max-content; 
    }
    /* Menú notificaciones para landscape, hereda el centrado de móvil vertical */
}

/* Print styles */
@media print {
    .sidebar, .topbar, .footer, .sidebar_toggle {
        display: none !important;
    }
    .content_area_wrapper { /* El nuevo wrapper también debe ocultar el margen en print */
        margin-left: 0 !important;
    }
    .main_content_scroll_wrapper { /* El scroll wrapper debe ser visible y sin scroll */
        padding: 0 !important;
        overflow: visible !important; 
    }
    body {
        background: white !important;
        color: black !important;
    }
    .glass-card, .dark-container {
        box-shadow: none !important;
        background: white !important;
        border: 1px solid #ddd !important;
    }
}